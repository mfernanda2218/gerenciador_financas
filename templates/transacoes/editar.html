{% extends 'base.html' %}

{% block title %}Editar Transação - Gerenciador de Finanças{% endblock %}

{% block content %}
<div class="flex items-center justify-center min-h-full">
    <div class="w-full max-w-lg bg-white p-8 rounded-lg shadow-md">
        <h2 class="text-2xl font-bold text-center text-gray-800 mb-6">Editar Transação</h2>
        <form method="POST" action="{{ url_for('transacoes.editar_transacao', transacao_id=transacao.id) }}">
            <div class="mb-4">
                <label for="descricao" class="block text-gray-700 text-sm font-bold mb-2">Descrição:</label>
                <input type="text" id="descricao" name="descricao" class="form-input" value="{{ transacao.descricao }}"
                    required>
            </div>
            <div class="mb-4">
                <label for="valor" class="block text-gray-700 text-sm font-bold mb-2">Valor:</label>
                <input type="number" id="valor" name="valor" class="form-input" step="0.01" min="0"
                    value="{{ transacao.valor }}" required>
            </div>
            <div class="mb-4">
                <label for="data" class="block text-gray-700 text-sm font-bold mb-2">Data:</label>
                <input type="date" id="data" name="data" class="form-input"
                    value="{{ transacao.data.strftime('%Y-%m-%d') }}" required>
            </div>
            <div class="mb-4">
                <label for="tipo" class="block text-gray-700 text-sm font-bold mb-2">Tipo:</label>
                <select id="tipo" name="tipo" class="form-input" required>
                    <option value="despesa" {% if transacao.tipo=='despesa' %}selected{% endif %}>Despesa</option>
                    <option value="receita" {% if transacao.tipo=='receita' %}selected{% endif %}>Receita</option>
                </select>
            </div>
            <div class="mb-6">
                <label for="categoria_id" class="block text-gray-700 text-sm font-bold mb-2">Categoria:</label>
                <select id="categoria_id" name="categoria_id" class="form-input">
                    <option value="none" {% if transacao.categoria_id is none %}selected{% endif %}>Nenhuma</option>
                    {% for categoria in categorias %}
                    <option value="{{ categoria.id }}" {% if transacao.categoria_id==categoria.id %}selected{% endif %}>
                        {{ categoria.nome }} ({{ categoria.tipo | capitalize }})
                    </option>
                    {% endfor %}
                </select>
            </div>
            <button type="submit" class="btn-primary w-full">Atualizar Transação</button>
        </form>
        <div class="mt-4 text-center">
            <a href="{{ url_for('transacoes.listar_transacoes') }}" class="text-blue-500 hover:underline">Voltar para a
                lista de transações</a>
        </div>
    </div>
</div>
{% endblock %}